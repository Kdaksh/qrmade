const req=e=>{console.log(e),"Contact"==e.type?format=`BEGIN:VCARD\nVERSION:3.0\nFN:${e.name.trim()}\nTEL:${e.number}\nEND:VCARD `:"Email"==e.type?format=`mailto:${e.value.trim()}`:"Number"==e.type?format=`tel:${e.value}`:format=e.value.trim(),e.format=format;(async()=>(data=await fetch("/api/genQr",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),data))().then(e=>e.json()).then(e=>{const t=`${JSON.parse(e).data.replace(/\\n/g,"").replace(/\\r/g,"")}`;let a=document.getElementById("download"),n=document.getElementById("qr-img");n.src=t,a.href=t,a.download=window.qr+".png",n.addEventListener("click",()=>{a.click()}),localStorage.clear()}),document.getElementById("f4-close").click()};